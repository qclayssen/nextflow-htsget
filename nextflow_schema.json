{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/quentinclayssen/nextflow-htsget/main/nextflow_schema.json",
  "title": "nextflow-htsget pipeline parameters",
  "description": "Schema describing parameters for the nextflow-htsget demonstration pipeline.",
  "type": "object",
  "definitions": {
    "general": {
      "title": "General options",
      "type": "object",
      "properties": {
        "outdir": {
          "type": "string",
          "description": "Directory where the pipeline publishes result files.",
          "default": "results"
        },
        "workdir": {
          "type": "string",
          "description": "Location for Nextflow intermediate work files.",
          "default": "work"
        },
        "publish_dir_mode": {
          "type": "string",
          "description": "Method used to publish files from work directory to the results directory.",
          "default": "copy",
          "enum": [
            "symlink",
            "rellink",
            "link",
            "copy",
            "copyNoFollow",
            "move"
          ],
          "hidden": true
        },
        "monochrome_logs": {
          "type": "boolean",
          "description": "Disable ANSI colours in Nextflow log output.",
          "default": false
        },
        "validate_params": {
          "type": "boolean",
          "description": "Enable JSON-schema validation for parameter inputs.",
          "default": true
        },
        "config_profile_name": {
          "type": "string",
          "description": "Human-readable label describing the active configuration profile.",
          "default": "standard"
        },
        "config_profile_description": {
          "type": "string",
          "description": "Extended description for the active configuration profile shown by launch helpers.",
          "default": "Run locally using the bundled Docker image"
        },
        "max_cpus": {
          "type": "integer",
          "description": "Hard limit for CPU requests across all processes.",
          "default": 4,
          "minimum": 1,
          "hidden": true
        },
        "max_memory": {
          "type": "string",
          "description": "Hard limit for memory requests; format like '16.GB'.",
          "default": "16.GB",
          "pattern": "^(?!\\s*$).+",
          "hidden": true
        },
        "max_time": {
          "type": "string",
          "description": "Hard limit for runtime; format like '8.h'.",
          "default": "8.h",
          "pattern": "^(?!\\s*$).+",
          "hidden": true
        },
        "help": {
          "type": "boolean",
          "description": "Display a short usage help message and exit.",
          "default": false,
          "hidden": true
        },
        "help_full": {
          "type": "boolean",
          "description": "Display the full parameter help output and exit.",
          "default": false,
          "hidden": true
        },
        "show_hidden": {
          "type": "boolean",
          "description": "Reveal hidden parameters in help output.",
          "default": false,
          "hidden": true
        },
        "version": {
          "type": "boolean",
          "description": "Display pipeline version and exit.",
          "default": false,
          "hidden": true
        },
        "trace_report_suffix": {
          "type": "string",
          "description": "Suffix appended to pipeline info filenames (defaults to current datetime when not supplied).",
          "hidden": true
        }
      }
    },
    "input": {
      "title": "Input",
      "type": "object",
      "properties": {
        "samplesheet": {
          "type": "string",
          "description": "CSV/TSV samplesheet listing records to fetch; supports Seqera datasets.",
          "default": "samplesheet.csv",
          "format": "file-path",
          "mimetype": "text/csv",
          "pattern": "(?i)^.+\\.(csv|tsv)$"
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/general"
    },
    {
      "$ref": "#/definitions/input"
    }
  ]
}
